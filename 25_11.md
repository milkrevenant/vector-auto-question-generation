# 25_11.pdf 처리 프로세스

## 개요
2025학년도 대학수학능력시험 국어영역 문제(25_11.pdf)를 개별 문제별 JSON 파일로 변환하는 작업 프로세스

## 작업 순서

### 1. PDF 분할
```bash
# split_25_11_pdf.py 실행
python split_25_11_pdf.py
```
- 25_11.pdf를 20개의 개별 페이지로 분할
- 출력: pdforg/25_11_split/25_11_page01.pdf ~ 25_11_page20.pdf

### 2. 문제 및 지문 추출 프로세스

#### 2.1 지문 구조 파악
- `[번호~번호]` 형식으로 지문 범위 표시 (예: [4~9])
- 지문은 (가), (나) 등으로 구분될 수 있음
- 2단 구성 PDF 레이아웃 고려 필요

#### 2.2 문제 패턴
- 문제 번호: `숫자.` 형식 (예: 4. 윗글에 대한...)
- 선택지: ①②③④⑤ 형식
- 일부 문제는 <보기>나 context_box 포함

### 3. 주요 스크립트들

#### 3.1 지문 및 문제 추출
```python
# extract_proper_passage.py - 지문 추출
import pdfplumber
import json
import os

# 페이지 2에서 [4~9] 지문 추출
# (가)와 (나) 부분 분리
# 모든 관련 문제에 동일한 지문 적용
```

#### 3.2 문제별 JSON 생성
각 JSON 파일 구조:
```json
{
  "id": "25_11_04",
  "source": "2025학년도 대학수학능력시험",
  "year": 2024,
  "month": 11,
  "exam_type_code": 1,
  "subject_code": "03",
  "type": "독서",
  "passage": "(가)\n...\n\n(나)\n...",
  "context_box": "",
  "question": "문제 텍스트",
  "options": [
    {"number": 1, "text": "선택지 1"},
    {"number": 2, "text": "선택지 2"},
    {"number": 3, "text": "선택지 3"},
    {"number": 4, "text": "선택지 4"},
    {"number": 5, "text": "선택지 5"}
  ],
  "answer_rate": 0,
  "difficulty": ""
}
```

### 4. 완료된 작업 (25_11_01 ~ 25_11_09)

#### 문제 1-3 ([1~3] 지문)
- 밑줄 긋기 독서 전략 관련 지문
- db/25_11_01.json, 25_11_02.json, 25_11_03.json

#### 문제 4-9 ([4~9] 지문)
- (가) 한국의 개화 개념 변화
- (나) 중국의 과학 수용과 신문화 운동
- db/25_11_04.json ~ 25_11_09.json

### 5. 다음 작업 예정 (25_11_10 이후)

#### 5.1 누락된 문제 확인
```python
# search_all_questions.py 실행 결과
# 누락된 문제: [10, 11, 12, 20, 21, 22, 26, 28, 31, 33, 34, 36]
```

#### 5.2 작업 순서
1. 각 지문 범위 확인 ([10~?], [20~?] 등)
2. 해당 페이지에서 지문 추출
3. 관련 문제들 추출
4. JSON 파일 생성
5. db/ 디렉토리에 저장

### 6. 주의사항
- 지문의 완전성이 최우선 (본문 무조건 포함)
- 2단 레이아웃 처리 주의
- 선택지가 여러 줄에 걸쳐 있을 수 있음
- 문제 번호가 페이지를 넘어갈 수 있음
- <보기>가 있는 경우 context_box에 포함

### 7. 검증 방법
```bash
# 생성된 파일 확인
cd db && ls 25_11_*.json | wc -l

# 지문 길이 확인
for f in 25_11_*.json; do
  echo "=== $f ==="
  jq -r '.passage | length' "$f"
done

# 문제 텍스트 확인
for f in 25_11_*.json; do
  echo "=== $f ==="
  jq '.question' "$f"
done
```

### 8. 트러블슈팅
- 지문이 비어있는 경우: 페이지 범위 재확인
- 선택지 누락: 다음 줄까지 확인
- 문제 번호 중복: 페이지 경계 확인